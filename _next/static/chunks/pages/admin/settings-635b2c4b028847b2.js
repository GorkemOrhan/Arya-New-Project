(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{4034:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings",function(){return s(3070)}])},7648:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let{children:t,type:s="button",variant:i="primary",size:r="md",className:n="",disabled:l=!1,onClick:m,...o}=e,d="".concat("btn inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"btn-primary focus:ring-primary-500",secondary:"btn-secondary focus:ring-secondary-500",danger:"btn-danger focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-primary-500"}[i]," ").concat({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[r]," ").concat(l?"opacity-50 cursor-not-allowed":"cursor-pointer"," ").concat(n);return(0,a.jsx)("button",{type:s,className:d,disabled:l,onClick:m,...o,children:t})}},3070:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a={};s.r(a);var i=s(5893),r=s(7294),n=s(1163);s(1664);var l=s(4052),m=s(1908),o=s(6676),d=s(7648);let c=async()=>{try{let e=await (0,a.apiRequest)({url:"/api/admin/settings",method:"GET"});return{success:!0,settings:e.data.settings||{}}}catch(s){var e,t;return console.error("Error fetching system settings:",s),{success:!1,message:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch system settings",settings:{}}}},u=async e=>{try{let t=await (0,a.apiRequest)({url:"/api/admin/settings",method:"PUT",data:{settings:e}});return{success:!0,settings:t.data.settings||{}}}catch(e){var t,s;return console.error("Error updating system settings:",e),{success:!1,message:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to update system settings"}}};var x=s(4401);let p=()=>{let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[a,m]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)({site_name:"Online Exam System",admin_email:"",notification_email:"",allow_registration:!0,default_passing_score:70,default_time_limit:60,enable_email_notifications:!0,smtp_host:"",smtp_port:"",smtp_username:"",smtp_password:"",smtp_from_email:"",smtp_from_name:""}),[f,b]=(0,r.useState)({type:"",text:""});(0,r.useEffect)(()=>{(async()=>{m(!0);try{let t=(0,x.ts)();if(!t||!t.is_admin){e.push("/dashboard");return}s(t);let a=await c();a.success&&y({...h,...a.settings})}catch(e){console.error("Error fetching user data:",e),b({type:"error",text:"Failed to load settings. Please try again."})}finally{m(!1)}})()},[e]);let _=e=>{let{name:t,value:s,type:a,checked:i}=e.target;y({...h,[t]:"checkbox"===a?i:s})},j=async e=>{e.preventDefault(),g(!0);try{let e=await u(h);e.success?(b({type:"success",text:"Settings updated successfully"}),setTimeout(()=>{b({type:"",text:""})},3e3)):b({type:"error",text:e.message||"Failed to update settings"})}catch(e){console.error("Error updating settings:",e),b({type:"error",text:"An unexpected error occurred"})}finally{g(!1)}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"})}),(0,i.jsxs)(o.Z,{className:"p-6 mb-8",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Application Settings"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"This is a placeholder for the system settings interface. In a real application, you would be able to configure:"}),(0,i.jsxs)("ul",{className:"list-disc pl-5 mb-4 text-gray-600 space-y-1",children:[(0,i.jsx)("li",{children:"General application settings"}),(0,i.jsx)("li",{children:"Email notification preferences"}),(0,i.jsx)("li",{children:"Security settings"}),(0,i.jsx)("li",{children:"API integrations"}),(0,i.jsx)("li",{children:"Theme and appearance"})]}),(0,i.jsx)("p",{className:"text-gray-600",children:"Extend this page by implementing the settings functionality according to your application's requirements."})]}),f.text&&(0,i.jsx)("div",{className:"mb-6 p-4 rounded-md ".concat("success"===f.type?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:f.text}),a?(0,i.jsx)("p",{children:"Loading settings..."}):(0,i.jsx)("form",{onSubmit:j,children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"General Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"site_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Site Name"}),(0,i.jsx)("input",{type:"text",id:"site_name",name:"site_name",value:h.site_name,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"admin_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Email"}),(0,i.jsx)("input",{type:"email",id:"admin_email",name:"admin_email",value:h.admin_email,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"notification_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notification Email"}),(0,i.jsx)("input",{type:"email",id:"notification_email",name:"notification_email",value:h.notification_email,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Email address where notifications and results will be sent"})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex items-center h-full",children:[(0,i.jsx)("input",{type:"checkbox",id:"allow_registration",name:"allow_registration",checked:h.allow_registration,onChange:_,className:"h-4 w-4 text-primary-600 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"allow_registration",className:"ml-2 block text-sm text-gray-700",children:"Allow user registration"})]})})]})]})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Exam Default Settings"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"default_passing_score",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Passing Score (%)"}),(0,i.jsx)("input",{type:"number",id:"default_passing_score",name:"default_passing_score",value:h.default_passing_score,onChange:_,min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"default_time_limit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Time Limit (minutes)"}),(0,i.jsx)("input",{type:"number",id:"default_time_limit",name:"default_time_limit",value:h.default_time_limit,onChange:_,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Settings"}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"enable_email_notifications",name:"enable_email_notifications",checked:h.enable_email_notifications,onChange:_,className:"h-4 w-4 text-primary-600 border-gray-300 rounded"}),(0,i.jsx)("label",{htmlFor:"enable_email_notifications",className:"ml-2 block text-sm text-gray-700",children:"Enable email notifications"})]})}),h.enable_email_notifications&&(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_host",className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Host"}),(0,i.jsx)("input",{type:"text",id:"smtp_host",name:"smtp_host",value:h.smtp_host,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_port",className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Port"}),(0,i.jsx)("input",{type:"text",id:"smtp_port",name:"smtp_port",value:h.smtp_port,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_username",className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Username"}),(0,i.jsx)("input",{type:"text",id:"smtp_username",name:"smtp_username",value:h.smtp_username,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_password",className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Password"}),(0,i.jsx)("input",{type:"password",id:"smtp_password",name:"smtp_password",value:h.smtp_password,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_from_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email"}),(0,i.jsx)("input",{type:"email",id:"smtp_from_email",name:"smtp_from_email",value:h.smtp_from_email,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"smtp_from_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"From Name"}),(0,i.jsx)("input",{type:"text",id:"smtp_from_name",name:"smtp_from_name",value:h.smtp_from_name,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]})}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(d.Z,{type:"submit",disabled:p,className:"flex items-center",children:p?"Saving...":(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.mW3,{className:"mr-2"}),"Save Settings"]})})})]})})]})};p.getLayout=e=>(0,i.jsx)(m.Z,{children:e});var g=p}},function(e){e.O(0,[152,917,330,930,888,774,179],function(){return e(e.s=4034)}),_N_E=e.O()}]);